{"ast":null,"code":"var _jsxFileName = \"D:\\\\Licenta_ultima_versiune\\\\Keycloak_2FA\\\\Licenta_site_test\\\\Fronted_site_test\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// import React, { useState} from 'react';\n// import { BrowserRouter, Routes, Route } from 'react-router-dom';\n// import Keycloak from 'keycloak-js';\n// import './App.css';\n\n// // import \"primereact/resources/themes/lara-light-indigo/theme.css\";\n// // import \"primereact/resources/primereact.min.css\";\n// // import '/node_modules/primeflex/primeflex.css';\n// // import { Button } from 'primereact/button';\n// // import { Card } from 'primereact/card';\n\n// import Overview from './pages/Overview';\n// import User from './pages/User';\n// import VotingResults from './pages/VotingResults';\n// import Voters from './pages/Voters';\n\n//   let initOptions = {\n//     url: 'http://localhost:8080/',\n//     realm: 'pnrealm',\n//     clientId: 'DemoVotingApp',\n//     onLoad: 'check-sso', // check-sso | login-required\n//     KeycloakResponseType: 'code',\n//   }\n\n//   let kc = new Keycloak(initOptions);\n\n//   kc.init({\n//     onLoad: initOptions.onLoad,\n//     KeycloakResponseType: 'code',\n//     silentCheckSsoRedirectUri: window.location.origin + \"/silent-check-sso.html\", \n//     checkLoginIframe: false\n//   }).then((auth) => {\n//     if (!auth) {\n//       window.location.reload();\n//     } else {\n//       console.info(\"Authenticated\");\n//       console.log('auth', auth)\n//       console.log('Keycloak', kc)\n//       kc.onTokenExpired = () => {\n//         console.log('token expired')\n//       }\n//     }\n//   }, () => {\n//     console.error(\"Authenticated Failed\");\n//   });\n\n// function App() {\n\n//   const [infoMessage, setInfoMessage] = useState('');\n//   const [openSidebarToggle, setOpenSidebarToggle] = useState(false)\n\n//   const OpenSidebar = () => {\n//     setOpenSidebarToggle(!openSidebarToggle)\n//   }\n//   // return (\n//   //   <BrowserRouter>\n//   //     <Routes>\n//   //       <Route path=\"/user\" element={<User />} />\n//   //       <Route path=\"/admin\" element={<Overview />} />\n//   //       <Route path=\"/results\" element={<VotingResults />} />\n//   //       <Route path=\"/voters\" element={<Voters />} />\n//   //     </Routes>\n//   //   </BrowserRouter>\n//   // );\n//   // return (\n//   //     <div className=\"App\">\n//   //     <div className='grid'>\n//   //       <div className='col-12'>\n//   //         <h1>Test</h1>\n//   //       </div>\n//   //       <div className='col-12'>\n//   //         <h1 id='app-header-2'>Keycloak</h1>\n//   //       </div>\n//   //     </div>\n//   //     <div className=\"grid\">\n//   //       <div className=\"col\">\n//   //       <Button onClick={() => { setInfoMessage(kc.authenticated ? 'Authenticated: TRUE' : 'Authenticated: FALSE') }} className=\"m-1\" label='Is Authenticated' />\n\n//   //         <Button onClick={() => { kc.login() }} className='m-1' label='Login' severity=\"success\" />\n//   //         <Button onClick={() => { setInfoMessage(kc.token) }} className=\"m-1\" label='Show Access Token' severity=\"info\" />\n//   //         <Button onClick={() => { setInfoMessage(JSON.stringify(kc.tokenParsed)) }} className=\"m-1\" label='Show Parsed Access token' severity=\"info\" />\n//   //         <Button onClick={() => { setInfoMessage(kc.isTokenExpired(5).toString()) }} className=\"m-1\" label='Check Token expired' severity=\"warning\" />\n//   //         <Button onClick={() => { kc.updateToken(10).then((refreshed)=>{ setInfoMessage('Token Refreshed: ' + refreshed.toString()) }, (e)=>{setInfoMessage('Refresh Error')}) }} className=\"m-1\" label='Update Token (if about to expire)' />  {/** 10 seconds */}\n//   //         <Button onClick={() => { kc.logout({ redirectUri: 'http://localhost:3000/' }) }} className=\"m-1\" label='Logout' severity=\"danger\" />\n\n//   //       </div>\n//   //     </div>\n\n//   //     <div className='grid'>\n//   //       <div className='col-2'></div>\n//   //       <div className='col-8'>\n//   //       <h3>Info Pane</h3>\n//   //         <Card>\n//   //           <p style={{ wordBreak: 'break-all' }} id='infoPanel'>\n//   //             {infoMessage}\n//   //           </p>\n//   //         </Card>\n//   //       </div>\n//   //       <div className='col-2'></div>\n//   //     </div>\n\n//   //   </div>\n//   // );\n// }\n\n// export default App;\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate } from 'react-router-dom';\nimport Keycloak from 'keycloak-js';\nimport './App.css';\nimport Overview from './pages/Overview';\nimport User from './pages/User';\nimport VotingResults from './pages/VotingResults';\nimport Voters from './pages/Voters';\n\n// Keycloak initializare și configurare\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initOptions = {\n  url: 'http://localhost:3000/',\n  realm: 'pnrealm',\n  clientId: 'DemoVotingApp',\n  onLoad: 'check-sso' // check-sso | login-required\n};\nconst kc = new Keycloak(initOptions);\nfunction App() {\n  _s();\n  const [keycloak, setKeycloak] = useState(null);\n  const [authenticated, setAuthenticated] = useState(false);\n  useEffect(() => {\n    kc.init({\n      onLoad: initOptions.onLoad\n    }).then(auth => {\n      if (!auth) {\n        setKeycloak(null);\n        setAuthenticated(false);\n        kc.login();\n      } else {\n        console.info(\"Authenticated\");\n        setKeycloak(kc);\n        setAuthenticated(true);\n      }\n    }).catch(err => {\n      console.error(\"Authentication failed\", err);\n    });\n  }, []);\n  if (keycloak) {\n    if (authenticated) {\n      // Utilizatorul este autentificat - arată conținutul protejat\n      return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/user\",\n            element: /*#__PURE__*/_jsxDEV(User, {\n              keycloak: keycloak\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/admin\",\n            element: /*#__PURE__*/_jsxDEV(Overview, {\n              keycloak: keycloak\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/results\",\n            element: /*#__PURE__*/_jsxDEV(VotingResults, {\n              keycloak: keycloak\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/voters\",\n            element: /*#__PURE__*/_jsxDEV(Voters, {\n              keycloak: keycloak\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this);\n    } else {\n      // Utilizatorul nu este autentificat - poți să arăți un mesaj sau să redirecționezi\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Please log in.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  // Încărcarea sau eroarea inițializării Keycloak\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Initializing Keycloak...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 10\n  }, this);\n}\n_s(App, \"qhsrASnmQMSmHJaHPbGdp9NFmHo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Routes","Route","Navigate","useNavigate","Keycloak","Overview","User","VotingResults","Voters","jsxDEV","_jsxDEV","initOptions","url","realm","clientId","onLoad","kc","App","_s","keycloak","setKeycloak","authenticated","setAuthenticated","init","then","auth","login","console","info","catch","err","error","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Licenta_ultima_versiune/Keycloak_2FA/Licenta_site_test/Fronted_site_test/src/App.js"],"sourcesContent":["// import React, { useState} from 'react';\n// import { BrowserRouter, Routes, Route } from 'react-router-dom';\n// import Keycloak from 'keycloak-js';\n// import './App.css';\n\n\n// // import \"primereact/resources/themes/lara-light-indigo/theme.css\";\n// // import \"primereact/resources/primereact.min.css\";\n// // import '/node_modules/primeflex/primeflex.css';\n// // import { Button } from 'primereact/button';\n// // import { Card } from 'primereact/card';\n\n\n// import Overview from './pages/Overview';\n// import User from './pages/User';\n// import VotingResults from './pages/VotingResults';\n// import Voters from './pages/Voters';\n\n//   let initOptions = {\n//     url: 'http://localhost:8080/',\n//     realm: 'pnrealm',\n//     clientId: 'DemoVotingApp',\n//     onLoad: 'check-sso', // check-sso | login-required\n//     KeycloakResponseType: 'code',\n//   }\n\n//   let kc = new Keycloak(initOptions);\n\n\n//   kc.init({\n//     onLoad: initOptions.onLoad,\n//     KeycloakResponseType: 'code',\n//     silentCheckSsoRedirectUri: window.location.origin + \"/silent-check-sso.html\", \n//     checkLoginIframe: false\n//   }).then((auth) => {\n//     if (!auth) {\n//       window.location.reload();\n//     } else {\n//       console.info(\"Authenticated\");\n//       console.log('auth', auth)\n//       console.log('Keycloak', kc)\n//       kc.onTokenExpired = () => {\n//         console.log('token expired')\n//       }\n//     }\n//   }, () => {\n//     console.error(\"Authenticated Failed\");\n//   });\n\n\n// function App() {\n\n//   const [infoMessage, setInfoMessage] = useState('');\n//   const [openSidebarToggle, setOpenSidebarToggle] = useState(false)\n\n//   const OpenSidebar = () => {\n//     setOpenSidebarToggle(!openSidebarToggle)\n//   }\n//   // return (\n//   //   <BrowserRouter>\n//   //     <Routes>\n//   //       <Route path=\"/user\" element={<User />} />\n//   //       <Route path=\"/admin\" element={<Overview />} />\n//   //       <Route path=\"/results\" element={<VotingResults />} />\n//   //       <Route path=\"/voters\" element={<Voters />} />\n//   //     </Routes>\n//   //   </BrowserRouter>\n//   // );\n//   // return (\n//   //     <div className=\"App\">\n//   //     <div className='grid'>\n//   //       <div className='col-12'>\n//   //         <h1>Test</h1>\n//   //       </div>\n//   //       <div className='col-12'>\n//   //         <h1 id='app-header-2'>Keycloak</h1>\n//   //       </div>\n//   //     </div>\n//   //     <div className=\"grid\">\n//   //       <div className=\"col\">\n//   //       <Button onClick={() => { setInfoMessage(kc.authenticated ? 'Authenticated: TRUE' : 'Authenticated: FALSE') }} className=\"m-1\" label='Is Authenticated' />\n         \n//   //         <Button onClick={() => { kc.login() }} className='m-1' label='Login' severity=\"success\" />\n//   //         <Button onClick={() => { setInfoMessage(kc.token) }} className=\"m-1\" label='Show Access Token' severity=\"info\" />\n//   //         <Button onClick={() => { setInfoMessage(JSON.stringify(kc.tokenParsed)) }} className=\"m-1\" label='Show Parsed Access token' severity=\"info\" />\n//   //         <Button onClick={() => { setInfoMessage(kc.isTokenExpired(5).toString()) }} className=\"m-1\" label='Check Token expired' severity=\"warning\" />\n//   //         <Button onClick={() => { kc.updateToken(10).then((refreshed)=>{ setInfoMessage('Token Refreshed: ' + refreshed.toString()) }, (e)=>{setInfoMessage('Refresh Error')}) }} className=\"m-1\" label='Update Token (if about to expire)' />  {/** 10 seconds */}\n//   //         <Button onClick={() => { kc.logout({ redirectUri: 'http://localhost:3000/' }) }} className=\"m-1\" label='Logout' severity=\"danger\" />\n          \n//   //       </div>\n//   //     </div>\n\n//   //     <div className='grid'>\n//   //       <div className='col-2'></div>\n//   //       <div className='col-8'>\n//   //       <h3>Info Pane</h3>\n//   //         <Card>\n//   //           <p style={{ wordBreak: 'break-all' }} id='infoPanel'>\n//   //             {infoMessage}\n//   //           </p>\n//   //         </Card>\n//   //       </div>\n//   //       <div className='col-2'></div>\n//   //     </div>\n\n\n\n//   //   </div>\n//   // );\n// }\n\n// export default App;\n\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate } from 'react-router-dom';\nimport Keycloak from 'keycloak-js';\nimport './App.css';\n\nimport Overview from './pages/Overview';\nimport User from './pages/User';\nimport VotingResults from './pages/VotingResults';\nimport Voters from './pages/Voters';\n\n// Keycloak initializare și configurare\nconst initOptions = {\n  url: 'http://localhost:3000/',\n  realm: 'pnrealm',\n  clientId: 'DemoVotingApp',\n  onLoad: 'check-sso', // check-sso | login-required\n};\n\nconst kc = new Keycloak(initOptions);\n\nfunction App() {\n  const [keycloak, setKeycloak] = useState(null);\n  const [authenticated, setAuthenticated] = useState(false);\n\n  useEffect(() => {\n    kc.init({ onLoad: initOptions.onLoad })\n      .then((auth) => {\n        if (!auth) {\n          setKeycloak(null);\n          setAuthenticated(false);\n          kc.login(); \n        } else {\n          console.info(\"Authenticated\");\n          setKeycloak(kc);\n          setAuthenticated(true);\n        }\n      }).catch(err => {\n        console.error(\"Authentication failed\", err);\n      });\n  }, []);\n\n  if (keycloak) {\n    if (authenticated) {\n      // Utilizatorul este autentificat - arată conținutul protejat\n      return (\n        <BrowserRouter>\n          <Routes>\n            <Route path=\"/user\" element={<User keycloak={keycloak} />} />\n            <Route path=\"/admin\" element={<Overview keycloak={keycloak} />} />\n            <Route path=\"/results\" element={<VotingResults keycloak={keycloak} />} />\n            <Route path=\"/voters\" element={<Voters keycloak={keycloak} />} />\n            {/* Adaugă restul rutelor aici */}\n          </Routes>\n        </BrowserRouter>\n      );\n    } else {\n      // Utilizatorul nu este autentificat - poți să arăți un mesaj sau să redirecționezi\n      return <div>Please log in.</div>;\n    }\n  }\n  \n  // Încărcarea sau eroarea inițializării Keycloak\n  return <div>Initializing Keycloak...</div>;\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}